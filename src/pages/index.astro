---
//import Welcome from '../components/Welcome.astro';
import Layout from '@/layouts/Layout.astro';

// Imágenes
import HeroKeyLogo from "@/assets/hero-key-logo.webp"
import HeroKeyBackground from "@/assets/hero-key-background.webp"
import LogoVI from "@/assets/logo-vi.svg"
import PlayButtonIcon from "@/assets/play-button.svg"
import LogoCutted from "@/assets/logo-cutted.svg"
---

<!--Index.astro la página principal, secciones únicas -->
<Layout>
	<div id="logo-mask" class="fixed top-0 w-full h-screen">
		<section class="bg-white h-screen"> <!-- h-screen: altura = 100% altura ventana navegador -->
		<!-- <h1>Portfolio</h1> -->

			<!-- Scale: zoom para luego alejar, 
			block: ocupa todo el ancho disponible, 
			overflow-hidden:oculta cualquier contenido que se desborde fuera del contenedor, 
			fixed: posiciona fijo sin moverse con el scroll (no se ven los otros section) -->
			<picture id="hero-key" class="h-screen scale-125 block overflow-hidden fixed">
			<!-- cover: para que al reducir la ventana se ajuste a cubrirla como esté y que no recorte la img -->
			<!-- absolute: img cubra todo, sino saldría una debajo de otra, solo puede llevarlo una, la del fondo -->
				<img
					id="hero-key-logo"
					src={HeroKeyLogo.src}
					class="absolute w-full h-full object-cover" 
				/>
				<img
					id="hero-key-background"
					src={HeroKeyBackground.src}
					class="w-full h-full object-cover"
				/>
			</picture>
		</section>
		<section class="bg-red-300 h-screen">
			<h1>Portfolio</h1>
		</section>
		<section class="bg-red-400 h-screen">
			<h1>Portfolio</h1>
		</section>
	</div>

	<div class="fixed flex flex-col items-center justify-between h-screen px-20 py-16 w-full">
    	<header class="flex justify-between w-full">
			<!-- hover efecto cuando pasa el ratón por encima (trans-color(suave) y duración de la transición) y puntero mano al pasar por encima -->
			<LogoVI class="size-11 text-white hover:text-yellow-100 transition-colors duration-500 cursor-pointer"/>
			
    	</header>

    <button class="absolute inset-0 m-auto cursor-pointer inline-block">
		<!-- backdrop para ponerle fondo, y rounded para quitarle el alrededor -->
      	<PlayButtonIcon
			id="hero-play-button"
			class="text-white m-auto size-32 mt-10 backdrop-blur-3xl rounded-full hover:scale-110 transition-transform duration-500"
      	/>
    </button>

    <footer id="hero-footer" class="absolute bottom-8 m-auto">
		<LogoCutted class="text-white w-38 drop-shadow-[0_0_2px_rgba(255,255,255,.5),0_0_8px_#000]"/>
		<!-- div crea salto de línea, span no, y aplica estilos a una palabra...y absolute para que quede por encima, y shadow(primero el brillante,_ luego el resalte) -->
		 <!-- tracking para separar las letras y whitespace para que la última palabara no vaya a la siguiente linea abajo, y left y translate para centrarlo (en conjuto con el absolute) -->
		<span class="absolute uppercase tracking-[6px] whitespace-nowrap text-center top-[49px] font-medium text-shadow-[0_0_2px_rgba(255,255,255,.5),0_0_8px_#000] left-1/2 -translate-x-1/2 text-lg">
			Ver el Tráiler 2
		</span>
    </footer>
  </div>
</Layout>

<!-- con CSS porque con tailwind es más complicado (para que la imagen esté dentro de las letras // clamp(valor min, preferido, max)-->
<style>
  #logo-mask {
    background: white;
    mask-image: url("/logo-stack.svg");
    mask-position: center 25%;
    mask-repeat: no-repeat;
    mask-size: clamp(5000vh, 3500%, 0vh); 
  }
</style>

<!-- scroll -->
<script>
	import { gsap } from "gsap"
	import { ScrollTrigger } from "gsap/ScrollTrigger"

	gsap.registerPlugin(ScrollTrigger)

	const tl = gsap.timeline({
		ease: "power2.out", //curva velocidad suave(power2) y desacelera al final(out) HAY MÁS
		scrollTrigger: {
			scrub: 1,  // tiempo para adaptarse el scroll (por eso no se usa true y si 1 seg retardo)
		},
	})

	tl // timeline
		.to("#hero-key", { duration: 1, scale: 1 }) //{ opacity: 0, duration: 1 } para que se desvanezca antes de terminar el scroll
		.to("#hero-key-logo", { opacity: 0 }, "<") //se pone < para que lo haga a la vez que la anterior 
		.to("#hero-footer", { opacity: 0 }, "<")
		.to("#hero-play-button", { opacity: 0 }, "<")				   // HAY MÁS TIPOS DE MÁSCARAS EN EL VÍDEO PÁGINAS!! min 54 
		.to("#logo-mask", { maskSize: "clamp(20vh, 25%, 30vh)"} ,0.15) //valores finales de la animación y 0.15 cuando tiene que empezar
		.to("#hero-key", { opacity: 0, duration: 0.2} , 0.4)
</script>

